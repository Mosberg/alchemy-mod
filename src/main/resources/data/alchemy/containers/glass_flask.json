{
  "type": "alchemy:container",
  "id": "alchemy:glass_flask",
  "container_kind": "flask",

  "stack_size": 16,
  "rarity": "common",
  "category": "containers",

  "durability": {
    "breakable": true,
    "max_damage": 0,
    "fireproof": false,
    "explosion_resistance": "low"
  },

  "liquid": {
    "can_contain_liquid": true,
    "capacity_mb": 250,
    "accepted_tags": [
      "alchemy:beverages",
      "alchemy:spirit",
      "alchemy:liqueur",
      "alchemy:potion_spirit"
    ],
    "default_fill_mb": 250,
    "transfer": {
      "fill_rate_mb_per_tick": 25,
      "pour_rate_mb_per_tick": 25,
      "allow_partial": true
    }
  },

  "seal": {
    "starts_sealed": false,
    "reopenable": true,
    "seal_quality": "stoppered",
    "leak_chance_per_minute_open": 0.001,
    "oxidation_multiplier_open": 1.75,
    "spoilage_multiplier_open": 1.25
  },

  "pressure": {
    "supports_pressure": false,
    "carbonation_style": "none",
    "max_pressure": 0.0,
    "burst": {
      "enabled": false,
      "pressure_threshold": 0.0,
      "drop_contents_on_burst": true,
      "burst_sound": "minecraft:entity.item.break"
    }
  },

  "temperature": {
    "insulation_factor": 0.3,
    "preferred_serving": "cool",
    "freezing_safe": true,
    "heat_safe": false
  },

  "interaction": {
    "use_action": "drink",
    "returns_container": true,
    "return_item_id": "alchemy:glass_flask",
    "consume_on_drink": false,

    "allow_fill_from": [
      "alchemy:aluminum_keg",
      "alchemy:distillation_apparatus"
    ],
    "allow_pour_to": ["alchemy:aluminum_keg", "alchemy:wooden_barrel"]
  },

  "client": {
    "render_mode": "item_with_liquid_tint",
    "liquid_tint_from_content": true,
    "show_fill_level_tooltip": true,
    "fill_level_steps": 5
  },

  "gates": {
    "requires_feature_flag": "alchemy:liquids",
    "requires_gamerule_true": "enableAlcoholEffects"
  },

  "text": {
    "lore_key": "item.alchemy.glass_flask.desc",
    "tooltip_key": "item.alchemy.glass_flask.tooltip",
    "flavor_text_key": "item.alchemy.glass_flask.flavor_text",
    "crafting_instructions_key": "item.alchemy.glass_flask.crafting_instructions"
  },

  "state_storage": {
    "mode": "both",
    "schema_version": 1,

    "defaults": {
      "payload": {
        "content_id": "",
        "amount_mb": 0,
        "quality": 0.0,
        "temperature": "ambient",
        "pressure": 0.0,
        "sealed": false,
        "created_time": 0
      }
    },

    "item_nbt": {
      "enabled": true,
      "nbt_root": "AlchemyContainer",
      "payload_key": "payload",
      "fields": {
        "content_id": "content_id",
        "amount_mb": "amount_mb",
        "quality": "quality",
        "temperature": "temperature",
        "pressure": "pressure",
        "sealed": "sealed",
        "created_time": "created_time"
      }
    },

    "placed_block": {
      "enabled": true,
      "block_id": "alchemy:placed_glass_flask",
      "block_entity_id": "alchemy:placed_container",
      "sync_to_client": true,
      "drops_keep_contents": true
    },

    "conversion": {
      "on_place": "copy_item_nbt_to_block_entity",
      "on_break": "copy_block_entity_to_item_nbt",
      "merge_strategy": "replace"
    }
  }
}
